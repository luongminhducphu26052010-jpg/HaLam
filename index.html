<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>C√¢y Th√¥ng Noel 3D</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#07121f;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

/* ===== LINK BOX ===== */
#link-box{
  position: fixed;
  bottom: 14px;
  right: 14px;
  width: 72vw;
  max-width: 260px;
  background: rgba(255,255,255,0.96);
  border-radius: 16px;
  padding: 14px 14px 12px;
  text-align: center;
  box-shadow: 0 10px 28px rgba(0,0,0,0.45);
  z-index: 999;
}

#link-box a{
  display: block;
  text-decoration: none;
  background: linear-gradient(135deg,#ff3b3b,#ff9f3b);
  color: #fff;
  font-size: 15px;
  font-weight: 600;
  padding: 12px 10px;
  border-radius: 12px;
}

#link-box a:active{
  transform: scale(0.97);
}

.link-text{
  margin-top: 8px;
  font-size: 12px;
  color: #222;
}
</style>
</head>

<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
// ===== SCENE =====
const scene=new THREE.Scene();
scene.fog=new THREE.Fog(0x07121f,20,80);

// ===== CAMERA =====
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,200);
camera.position.set(0,7,18);

// ===== RENDERER =====
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));
document.body.appendChild(renderer.domElement);

// ===== LIGHT =====
scene.add(new THREE.AmbientLight(0xffffff,0.7));
const d=new THREE.DirectionalLight(0xffffff,1.2);
d.position.set(20,40,20);
scene.add(d);

// ===== üéÑ TREE =====
const tree=new THREE.Group();
scene.add(tree);

// th√¢n c√¢y
const trunk=new THREE.Mesh(
  new THREE.CylinderGeometry(0.8,1.1,3,20),
  new THREE.MeshStandardMaterial({color:0x6a3b1f})
);
trunk.position.y=-1.5;
tree.add(trunk);

// l√° c√¢y
const leafMat=new THREE.MeshStandardMaterial({color:0x0b8f45});
for(let i=0;i<7;i++){
  const cone=new THREE.Mesh(
    new THREE.ConeGeometry(4.8-i*0.5,2.3,36),
    leafMat
  );
  cone.position.y=i*1.25;
  tree.add(cone);
}

// ‚≠ê SAO
const star=new THREE.Mesh(
  new THREE.OctahedronGeometry(0.7),
  new THREE.MeshStandardMaterial({
    color:0xffd700,
    emissive:0xffd700,
    emissiveIntensity:1.6
  })
);
star.position.y=10.3;
tree.add(star);

// ===== ƒê√àN =====
const colors=[0xff3b3b,0xffd93b,0x3bff6f,0x3bb3ff,0xd13bff];
const bulbs=[];
for(let i=0;i<120;i++){
  const bulb=new THREE.Mesh(
    new THREE.SphereGeometry(0.14,10,10),
    new THREE.MeshStandardMaterial({
      color:colors[i%colors.length],
      emissive:colors[i%colors.length],
      emissiveIntensity:0.9
    })
  );
  bulb.userData.t=i/120;
  bulbs.push(bulb);
  tree.add(bulb);
}

// ===== TUY·∫æT =====
const snow=[];
for(let i=0;i<700;i++)
  snow.push((Math.random()-0.5)*50,Math.random()*40,(Math.random()-0.5)*50);

const snowGeo=new THREE.BufferGeometry();
snowGeo.setAttribute("position",new THREE.Float32BufferAttribute(snow,3));
const snowMesh=new THREE.Points(
  snowGeo,new THREE.PointsMaterial({color:0xffffff,size:0.2})
);
scene.add(snowMesh);

// ===== ANIMATE =====
function animate(){
  requestAnimationFrame(animate);

  tree.rotation.y+=0.0015;
  star.rotation.y+=0.05;

  bulbs.forEach(b=>{
    b.userData.t+=0.0008;
    if(b.userData.t>1)b.userData.t=0;

    const t=b.userData.t;
    const y=t*9;
    const r=4.2-(y*0.35);
    const a=t*12*Math.PI;

    b.position.set(Math.cos(a)*r,y,Math.sin(a)*r);
  });

  const s=snowMesh.geometry.attributes.position.array;
  for(let i=1;i<s.length;i+=3){
    s[i]-=0.12;
    if(s[i]<0)s[i]=40;
  }
  snowMesh.geometry.attributes.position.needsUpdate=true;

  renderer.render(scene,camera);
}
animate();

addEventListener("resize",()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>

<!-- ===== LINK QUIZ ===== -->
<div id="link-box">
  <a href="https://quiz.zep.us/vi/play/pn3jjr" target="_blank">
    üéÆ Lam B·∫•m V√†o ƒêi
  </a>
  <div class="link-text">Ch√∫c Lam Gi√°ng Sinh Vui V·∫ª üéÑ</div>
</div>

</body>
</html>
